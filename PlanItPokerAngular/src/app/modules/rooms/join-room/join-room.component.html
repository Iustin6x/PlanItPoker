<div class="join-room-container">

  @if (loading()) {
    <div class="loading-overlay">
      <div class="bosch-spinner"></div>
      <p class="bosch-text-body">Loading room data...</p>
    </div>
  }

  <!-- Error state -->
  @if (showError && error()) {
    <div class="error-message">
      <div class="error-content bosch-card">
        <i class="a-icon boschicon-bosch-ic-error"></i>
        <p class="bosch-text-body">{{ error() }}</p>
        <button 
          type="button" 
          class="a-button a-button--primary"
          (click)="retryConnection()"
        >
          Retry
        </button>
      </div>
    </div>
  }

  <app-header></app-header>

  <div class="main-container">
    <div class="bosch-grid-layout">
      <!-- Left Column (2/3 width) -->
      <div class="left-column">
        <!-- Voting Section -->
        <div class="bosch-card-section voting-section">
          @if (!isRevealed()) {
            <app-voting-card></app-voting-card>
          } @else {
            <app-voting-results></app-voting-results>
          }
        </div>

        <!-- Story List (under voting) -->
        <div class="bosch-card-section story-section">
          <app-story-list></app-story-list>
        </div>
      </div>

      <!-- Right Column (1/3 width) -->
      <div class="right-column">
        <!-- Moderator Panel (only for moderators) -->
        @if (playerRole() === PlayerRole.MODERATOR) {
          <div class="bosch-card-section moderator-section">
            <app-moderator-panel></app-moderator-panel>
          </div>
        }


        <div class="bosch-card-section players-section">
          <app-players-panel></app-players-panel>
        </div>
      </div>
    </div>
  </div>
</div>