<table class="m-table" aria-label="Planning Rooms">
  <thead>
    <tr>
      <th>Name</th>
      <th>Last voted story</th>
      <th>Last action date</th>
      <th>Total points</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let room of rooms" class="clickable-row" (click)="handleSelect(room)">
      <td>{{ room.name }}</td>
      <td>{{ room.lastVotedStory || '-' }}</td>
      <td>{{ room.lastActionTime ? (room.lastActionTime | date:'short') : '-' }}</td>
      <td>{{ room.totalPoints || '0' }}</td>
      <td class="-with-icon">
        <!-- Moderator Actions -->
        <ng-container *ngIf="room.userRole === 'MODERATOR'">
          <button type="button"
            class="a-button a-button--tertiary -without-label"
            aria-label="Edit room"
            (click)="handleEdit(room); $event.stopPropagation()">
            <i class="a-icon a-button__icon boschicon-bosch-ic-edit"></i>
          </button>
          
          <button type="button"
            class="a-button a-button--tertiary -without-label"
            aria-label="Delete room"
            (click)="handleDelete(room.id); $event.stopPropagation()">
            <i class="a-icon a-button__icon boschicon-bosch-ic-delete"></i>
          </button>
        </ng-container>

        <!-- Player Actions -->
        <ng-container *ngIf="room.userRole === 'PLAYER'">
          <button type="button"
            class="a-button a-button--tertiary -without-label"
            aria-label="Leave room"
            (click)="handleLeave(room.id); $event.stopPropagation()">
            <i class="a-icon a-button__icon boschicon-bosch-ic-exit"></i>
          </button>
        </ng-container>
      </td>
    </tr>
  </tbody>
</table>